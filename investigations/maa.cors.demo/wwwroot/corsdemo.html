<!DOCTYPE html>
<html lang="en">
<head>
    <title>Cors Demo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
    <script>
        var quoteBase64Url = "AwACAAAAAAAGAAsAk5pyM_ecTKmUCg2zlX8GB1iauyioleSJSB34ZbIZ8-EAAAAAEREDBf-ABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAHAAAAAAAAAADKnp_k0MdG4RHQNQGUDqt8zDxFbGwEQkqhNc9L90exAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABiumvKtZcAw0C9vNNr90xuDWiSzfkWcdypO8v_-B758gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABNf8a5vax3Ic4ybdoN-Fv8QiephPOJbxv9CEQdzQslaQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANBAAAKs4adUAyk9ZOn3enZ9_eEJ0eJOnhRLk7xrHxAyR8dY1gTyYTkuzQFTfWdBQdVHwYcNc-GMsSniTvmnL3TwB9KyQp3tQ-OyNiqn_jIw7VGoeGNMx8KHWfa0X9iAjghRNYgn1i2WRRjA2P_18wTKlUCX6NK3g3zRkOET1AcqHXMRYEREDBf-ABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFQAAAAAAAAAHAAAAAAAAAFxgaTuTglIDbWPPgJ2tBdKqHc0aTg3f-RFRMLraJCY-AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACMT1d115ZQPpYTf3fGioKaAFasje1wFAsIGwlEkMV7_wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQseEVqo2paVOMZc5yJUitnR03WS0nHW-u_ekuqYN5OwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAolCYxqdtlFPujyR0q0BjdWs8QrT-F3Ox0DO59s4nhXE3tMvF6joH1dVBOhpKXS9A5V097nxwcXjgsNBryPa1WiAAAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8FAMwNAAAtLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJRWdUQ0NCQ2FnQXdJQkFnSVVRYUpDZis5NU1MbnpVcmNKWm9JSlJEank5emt3Q2dZSUtvWkl6ajBFQXdJdwpjVEVqTUNFR0ExVUVBd3dhU1c1MFpXd2dVMGRZSUZCRFN5QlFjbTlqWlhOemIzSWdRMEV4R2pBWUJnTlZCQW9NCkVVbHVkR1ZzSUVOdmNuQnZjbUYwYVc5dU1SUXdFZ1lEVlFRSERBdFRZVzUwWVNCRGJHRnlZVEVMTUFrR0ExVUUKQ0F3Q1EwRXhDekFKQmdOVkJBWVRBbFZUTUI0WERUSXhNRE13TVRFek1EWXpNbG9YRFRJNE1ETXdNVEV6TURZegpNbG93Y0RFaU1DQUdBMVVFQXd3WlNXNTBaV3dnVTBkWUlGQkRTeUJEWlhKMGFXWnBZMkYwWlRFYU1CZ0dBMVVFCkNnd1JTVzUwWld3Z1EyOXljRzl5WVhScGIyNHhGREFTQmdOVkJBY01DMU5oYm5SaElFTnNZWEpoTVFzd0NRWUQKVlFRSURBSkRRVEVMTUFrR0ExVUVCaE1DVlZNd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUJCd05DQUFTcAp3QUtaUFJGMTJraVRrOTUza1hSelptcllDREpuSkJCejN4bWxZQ3JNYjc0UWZYd3AzVzlYU2NYUUc0R0JEaDhLCmlkbDZieWhNaXZBQSs0eFlDNC9MbzRJQ216Q0NBcGN3SHdZRFZSMGpCQmd3Rm9BVTBPaXEyblhYK1M1SkY1ZzgKZXhSbDBOWHlXVTB3WHdZRFZSMGZCRmd3VmpCVW9GS2dVSVpPYUhSMGNITTZMeTloY0drdWRISjFjM1JsWkhObApjblpwWTJWekxtbHVkR1ZzTG1OdmJTOXpaM2d2WTJWeWRHbG1hV05oZEdsdmJpOTJNaTl3WTJ0amNtdy9ZMkU5CmNISnZZMlZ6YzI5eU1CMEdBMVVkRGdRV0JCUnJJK0NCZWE2bHFlYS9rL1VhUnVVTk9HM3ZLekFPQmdOVkhROEIKQWY4RUJBTUNCc0F3REFZRFZSMFRBUUgvQkFJd0FEQ0NBZFFHQ1NxR1NJYjRUUUVOQVFTQ0FjVXdnZ0hCTUI0RwpDaXFHU0liNFRRRU5BUUVFRUxLWUFPUHBDalAzTm9kK2VZdlkzZ2t3Z2dGa0Jnb3Foa2lHK0UwQkRRRUNNSUlCClZEQVFCZ3NxaGtpRytFMEJEUUVDQVFJQkVUQVFCZ3NxaGtpRytFMEJEUUVDQWdJQkVUQVFCZ3NxaGtpRytFMEIKRFFFQ0F3SUJBakFRQmdzcWhraUcrRTBCRFFFQ0JBSUJCREFRQmdzcWhraUcrRTBCRFFFQ0JRSUJBVEFSQmdzcQpoa2lHK0UwQkRRRUNCZ0lDQUlBd0VBWUxLb1pJaHZoTkFRMEJBZ2NDQVFZd0VBWUxLb1pJaHZoTkFRMEJBZ2dDCkFRQXdFQVlMS29aSWh2aE5BUTBCQWdrQ0FRQXdFQVlMS29aSWh2aE5BUTBCQWdvQ0FRQXdFQVlMS29aSWh2aE4KQVEwQkFnc0NBUUF3RUFZTEtvWklodmhOQVEwQkFnd0NBUUF3RUFZTEtvWklodmhOQVEwQkFnMENBUUF3RUFZTApLb1pJaHZoTkFRMEJBZzRDQVFBd0VBWUxLb1pJaHZoTkFRMEJBZzhDQVFBd0VBWUxLb1pJaHZoTkFRMEJBaEFDCkFRQXdFQVlMS29aSWh2aE5BUTBCQWhFQ0FRb3dId1lMS29aSWh2aE5BUTBCQWhJRUVCRVJBZ1FCZ0FZQUFBQUEKQUFBQUFBQXdFQVlLS29aSWh2aE5BUTBCQXdRQ0FBQXdGQVlLS29aSWh2aE5BUTBCQkFRR0FKQnUxUUFBTUE4RwpDaXFHU0liNFRRRU5BUVVLQVFBd0NnWUlLb1pJemowRUF3SURTUUF3UmdJaEFNWjJxalpPRTZZcXJlY25RT0N6CjRKMzdzWDFXK0V0aHdab3N6K3praENveEFpRUE2cWpIWGZsVmJCRDBLcFpBbUErRnR5MDdRUlVmUkFEU0FuenUKUnpiZEZwOD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJQ2x6Q0NBajZnQXdJQkFnSVZBTkRvcXRwMTEva3VTUmVZUEhzVVpkRFY4bGxOTUFvR0NDcUdTTTQ5QkFNQwpNR2d4R2pBWUJnTlZCQU1NRVVsdWRHVnNJRk5IV0NCU2IyOTBJRU5CTVJvd0dBWURWUVFLREJGSmJuUmxiQ0JECmIzSndiM0poZEdsdmJqRVVNQklHQTFVRUJ3d0xVMkZ1ZEdFZ1EyeGhjbUV4Q3pBSkJnTlZCQWdNQWtOQk1Rc3cKQ1FZRFZRUUdFd0pWVXpBZUZ3MHhPREExTWpFeE1EUTFNRGhhRncwek16QTFNakV4TURRMU1EaGFNSEV4SXpBaApCZ05WQkFNTUdrbHVkR1ZzSUZOSFdDQlFRMHNnVUhKdlkyVnpjMjl5SUVOQk1Sb3dHQVlEVlFRS0RCRkpiblJsCmJDQkRiM0p3YjNKaGRHbHZiakVVTUJJR0ExVUVCd3dMVTJGdWRHRWdRMnhoY21FeEN6QUpCZ05WQkFnTUFrTkIKTVFzd0NRWURWUVFHRXdKVlV6QlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJMOXErTk1wMklPZwp0ZGwxYmsvdVdaNStUR1FtOGFDaTh6NzhmcytmS0NRM2QrdUR6WG5WVEFUMlpoRENpZnlJdUp3dk4zd05CcDlpCkhCU1NNSk1KckJPamdic3dnYmd3SHdZRFZSMGpCQmd3Rm9BVUltVU0xbHFkTkluemc3U1ZVcjlRR3prbkJxd3cKVWdZRFZSMGZCRXN3U1RCSG9FV2dRNFpCYUhSMGNITTZMeTlqWlhKMGFXWnBZMkYwWlhNdWRISjFjM1JsWkhObApjblpwWTJWekxtbHVkR1ZzTG1OdmJTOUpiblJsYkZOSFdGSnZiM1JEUVM1amNtd3dIUVlEVlIwT0JCWUVGTkRvCnF0cDExL2t1U1JlWVBIc1VaZERWOGxsTk1BNEdBMVVkRHdFQi93UUVBd0lCQmpBU0JnTlZIUk1CQWY4RUNEQUcKQVFIL0FnRUFNQW9HQ0NxR1NNNDlCQU1DQTBjQU1FUUNJQy85ais4NFQrSHp0Vk8vc09RQldKYlNkKy8ydWV4Swo0K2FBMGpjRkJMY3BBaUEzZGhNckY1Y0Q1MnQ2RnFNdkFJcGo4WGRHbXkyYmVlbGpMSksrcHpwY1JBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJQ2pqQ0NBalNnQXdJQkFnSVVJbVVNMWxxZE5JbnpnN1NWVXI5UUd6a25CcXd3Q2dZSUtvWkl6ajBFQXdJdwphREVhTUJnR0ExVUVBd3dSU1c1MFpXd2dVMGRZSUZKdmIzUWdRMEV4R2pBWUJnTlZCQW9NRVVsdWRHVnNJRU52CmNuQnZjbUYwYVc5dU1SUXdFZ1lEVlFRSERBdFRZVzUwWVNCRGJHRnlZVEVMTUFrR0ExVUVDQXdDUTBFeEN6QUoKQmdOVkJBWVRBbFZUTUI0WERURTRNRFV5TVRFd05ERXhNVm9YRFRNek1EVXlNVEV3TkRFeE1Gb3dhREVhTUJnRwpBMVVFQXd3UlNXNTBaV3dnVTBkWUlGSnZiM1FnUTBFeEdqQVlCZ05WQkFvTUVVbHVkR1ZzSUVOdmNuQnZjbUYwCmFXOXVNUlF3RWdZRFZRUUhEQXRUWVc1MFlTQkRiR0Z5WVRFTE1Ba0dBMVVFQ0F3Q1EwRXhDekFKQmdOVkJBWVQKQWxWVE1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRUM2bkV3TURJWVpPai9pUFdzQ3phRUtpNwoxT2lPU0xSRmhXR2pibkJWSmZWbmtZNHUzSWprRFlZTDBNeE80bXFzeVlqbEJhbFRWWXhGUDJzSkJLNXpsS09CCnV6Q0J1REFmQmdOVkhTTUVHREFXZ0JRaVpReldXcDAwaWZPRHRKVlN2MUFiT1NjR3JEQlNCZ05WSFI4RVN6QkoKTUVlZ1JhQkRoa0ZvZEhSd2N6b3ZMMk5sY25ScFptbGpZWFJsY3k1MGNuVnpkR1ZrYzJWeWRtbGpaWE11YVc1MApaV3d1WTI5dEwwbHVkR1ZzVTBkWVVtOXZkRU5CTG1OeWJEQWRCZ05WSFE0RUZnUVVJbVVNMWxxZE5JbnpnN1NWClVyOVFHemtuQnF3d0RnWURWUjBQQVFIL0JBUURBZ0VHTUJJR0ExVWRFd0VCL3dRSU1BWUJBZjhDQVFFd0NnWUkKS29aSXpqMEVBd0lEU0FBd1JRSWdRUXMvMDhyeWNkUGF1Q0ZrOFVQUVhDTUFsc2xvQmU3TndhUUdUY2RwYTBFQwpJUUNVdDhTR3Z4S21qcGNNL3owV1A5RHZvOGgyazVkdTFpV0RkQmtBbiswaWlBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQoA";
        var runtimeDataBase64Url = "LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUE1RFpyMFpRSnBrT2JZUFl4NDhKcQptTGxMRDNkWEZ3Z3RCRm1ZdHJPSGxQcDAxNXZJS2xGc1NCVEs2YU1pcDlBTzA2YzFLQ2xJSzBERGZTZ1ZuRFlNClZKM09iRklmdFBaYmRYeU90MEdFRFVOOUxvVEdVWFdUS21zZ0NxZEo0SDNGaVNadkZTWlA1QUp5SVJoRWlFMXUKUllmRGZCRzExQTdLYlBNSWFMMUFacFZxMVgvY0NTS3pobzU4NzJQMmJ4bG1XdlpCNi9WMERJbTBVNnhwSFMrdwpWWVAwU2U0cHlwN2lWcUQ3ak5PcHExREtobW9VekZSUzcxc25ZZlhCY1l5Tk91WWhKRDBEclR0bFBLS2lWVC8zCmxXR3ZlK1Z3YjRGV3NZOGpRdTVKdTdNWEh5VXJVbFNQMVFuSFo3Rm9vOTU5SVhQUldKSkJqN0FITzU1NG1WTkkKWVFJREFRQUIKLS0tLS1FTkQgUFVCTElDIEtFWS0tLS0tCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
        function getCerts() {
            $("#certs-status").text("RETRIEVING CERTS...");
            $("#certs-result").text("");

            fetch('https://sharedwus.wus.attest.azure.net/certs', {
                headers: {
                    'Accept': 'application/json'
                }
            })
                .then(response => response.json())
                .then(jsonObject => {
                    $("#certs-status").text("SUCCESS");
                    $("#certs-status").css("background-color", "lightgreen");
                    $("#certs-result").text(JSON.stringify(jsonObject));
                })
                .catch(error => {
                    $("#certs-status").text("FAILURE (hit <ctrl><shift><i> to see details)");
                    $("#certs-status").css("background-color", "pink");
                    $("#certs-result").text(error);
                });
        }
        function callAttestSgx() {
            $("#attest-status").text("CALLING ATTEST ...");
            $("#attest-result").text("");

            fetch('https://sharedwus.wus.attest.azure.net/attest/SgxEnclave?api-version=2020-10-01', {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ quote: quoteBase64Url, runtimeData: { dataType: "Binary", data: runtimeDataBase64Url } })
            })
                .then(response => response.json())
                .then(jsonObject => {
                    $("#attest-status").text("SUCCESS");
                    $("#attest-status").css("background-color", "lightgreen");
                    $("#attest-result").text(JSON.stringify(jsonObject));
                })
                .catch(error => {
                    $("#attest-status").text("FAILURE (hit <ctrl><shift><i> to see details)");
                    $("#attest-status").css("background-color", "pink");
                    $("#attest-result").text(error);
                });
        }
    </script>

    <div class="container-fluid">
        <h1 class="well text-center">Simple MAA CORS demo</h1>
        <h3 class="well text-center">Trusted from any referer</h3>
        <h3 class="well text-center">Getting MAA certs from https://sharedwus.wus.attest.azure.net/certs</h3>
        <div class="row">
            <div></div>
            <div class="text-center">
                <div>
                    <button type="button" class="btn btn-primary" onclick="getCerts()">Get Certs</button>
                </div>
                <div style="margin-top: 20px;">
                    <h3 id="certs-status"></h3>
                </div>
                <div style="margin-top: 20px;">
                    <p id="certs-result"></p>
                </div>
            </div>
        </div>
        <h3 class="well text-center">Trusted from limited referers (e.g., https://localhost:44300)</h3>
        <h3 class="well text-center">Requesting attestation from https://sharedwus.wus.attest.azure.net/attest/SgxEnclave?api-version=2020-10-01</h3>
        <div class="row">
            <div></div>
            <div class="text-center">
                <div>
                    <button type="button" class="btn btn-primary" onclick="callAttestSgx()">Attest</button>
                </div>
                <div style="margin-top: 20px;">
                    <h3 id="attest-status"></h3>
                </div>
                <div style="margin-top: 20px;">
                    <p id="attest-result"></p>
                </div>
            </div>
        </div>
    </div>

</body>
</html>